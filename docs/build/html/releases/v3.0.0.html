

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>What’s new in Tornado 3.0 &mdash; Tornado 6.1.dev1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What’s new in Tornado 2.4.1" href="v2.4.1.html" />
    <link rel="prev" title="What’s new in Tornado 3.0.1" href="v3.0.1.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Tornado
          

          
          </a>

          
            
            
              <div class="version">
                6.1.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../guide.html">User’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webframework.html">Web framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../http.html">HTTP servers and clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking.html">Asynchronous networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coroutine.html">Coroutines and concurrency</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration.html">Integration with other services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../releases.html">Release notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="v6.0.0.html">What’s new in Tornado 6.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="v5.1.1.html">What’s new in Tornado 5.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v5.1.0.html">What’s new in Tornado 5.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v5.0.2.html">What’s new in Tornado 5.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="v5.0.1.html">What’s new in Tornado 5.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v5.0.0.html">What’s new in Tornado 5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.5.3.html">What’s new in Tornado 4.5.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.5.2.html">What’s new in Tornado 4.5.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.5.1.html">What’s new in Tornado 4.5.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.5.0.html">What’s new in Tornado 4.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.4.3.html">What’s new in Tornado 4.4.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.4.2.html">What’s new in Tornado 4.4.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.4.1.html">What’s new in Tornado 4.4.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.4.0.html">What’s new in Tornado 4.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.3.0.html">What’s new in Tornado 4.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.2.1.html">What’s new in Tornado 4.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.2.0.html">What’s new in Tornado 4.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.1.0.html">What’s new in Tornado 4.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.0.2.html">What’s new in Tornado 4.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.0.1.html">What’s new in Tornado 4.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v4.0.0.html">What’s new in Tornado 4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="v3.2.2.html">What’s new in Tornado 3.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="v3.2.1.html">What’s new in Tornado 3.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v3.2.0.html">What’s new in Tornado 3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="v3.1.1.html">What’s new in Tornado 3.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v3.1.0.html">What’s new in Tornado 3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v3.0.2.html">What’s new in Tornado 3.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="v3.0.1.html">What’s new in Tornado 3.0.1</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">What’s new in Tornado 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="v2.4.1.html">What’s new in Tornado 2.4.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v2.4.0.html">What’s new in Tornado 2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="v2.3.0.html">What’s new in Tornado 2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="v2.2.1.html">What’s new in Tornado 2.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v2.2.0.html">What’s new in Tornado 2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="v2.1.1.html">What’s new in Tornado 2.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v2.1.0.html">What’s new in Tornado 2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v2.0.0.html">What’s new in Tornado 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.2.1.html">What’s new in Tornado 1.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.2.0.html">What’s new in Tornado 1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.1.1.html">What’s new in Tornado 1.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.1.0.html">What’s new in Tornado 1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.0.1.html">What’s new in Tornado 1.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.0.0.html">What’s new in Tornado 1.0</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Tornado</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../releases.html">Release notes</a> &raquo;</li>
        
      <li>What’s new in Tornado 3.0</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/releases/v3.0.0.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="what-s-new-in-tornado-3-0">
<h1>What’s new in Tornado 3.0<a class="headerlink" href="#what-s-new-in-tornado-3-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="mar-29-2013">
<h2>Mar 29, 2013<a class="headerlink" href="#mar-29-2013" title="Permalink to this headline">¶</a></h2>
<div class="section" id="highlights">
<h3>Highlights<a class="headerlink" href="#highlights" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">callback</span></code> argument to many asynchronous methods is now
optional, and these methods return a <a class="reference internal" href="../concurrent.html#tornado.concurrent.Future" title="tornado.concurrent.Future"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Future</span></code></a>.  The <a class="reference internal" href="../gen.html#module-tornado.gen" title="tornado.gen"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.gen</span></code></a>
module now understands <code class="docutils literal notranslate"><span class="pre">Futures</span></code>, and these methods can be used
directly without a <code class="docutils literal notranslate"><span class="pre">gen.Task</span></code> wrapper.</p></li>
<li><p>New function <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.current" title="tornado.ioloop.IOLoop.current"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.current</span></code></a> returns the <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> that is running
on the current thread (as opposed to <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.instance" title="tornado.ioloop.IOLoop.instance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.instance</span></code></a>, which
returns a specific thread’s (usually the main thread’s) IOLoop.</p></li>
<li><p>New class <a class="reference internal" href="../netutil.html#tornado.netutil.Resolver" title="tornado.netutil.Resolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.netutil.Resolver</span></code></a> provides an asynchronous
interface to DNS resolution.  The default implementation is still
blocking, but non-blocking implementations are available using one
of three optional dependencies: <a class="reference internal" href="../netutil.html#tornado.netutil.ThreadedResolver" title="tornado.netutil.ThreadedResolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ThreadedResolver</span></code></a>
using the <a class="reference external" href="https://docs.python.org/3.6/library/concurrent.futures.html#module-concurrent.futures" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">concurrent.futures</span></code></a> thread pool,
<code class="docutils literal notranslate"><span class="pre">tornado.platform.caresresolver.CaresResolver</span></code> using the <code class="docutils literal notranslate"><span class="pre">pycares</span></code>
library, or <code class="docutils literal notranslate"><span class="pre">tornado.platform.twisted.TwistedResolver</span></code> using <code class="docutils literal notranslate"><span class="pre">twisted</span></code></p></li>
<li><p>Tornado’s logging is now less noisy, and it no longer goes directly
to the root logger, allowing for finer-grained configuration.</p></li>
<li><p>New class <a class="reference internal" href="../process.html#tornado.process.Subprocess" title="tornado.process.Subprocess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.process.Subprocess</span></code></a> wraps <a class="reference external" href="https://docs.python.org/3.6/library/subprocess.html#subprocess.Popen" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> with
<a class="reference internal" href="../iostream.html#tornado.iostream.PipeIOStream" title="tornado.iostream.PipeIOStream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PipeIOStream</span></code></a> access to the child’s file descriptors.</p></li>
<li><p><a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> now has a static <a class="reference internal" href="../util.html#tornado.util.Configurable.configure" title="tornado.util.Configurable.configure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure</span></code></a>
method like the one on <a class="reference internal" href="../httpclient.html#tornado.httpclient.AsyncHTTPClient" title="tornado.httpclient.AsyncHTTPClient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPClient</span></code></a>, which can be used to
select an <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> implementation other than the default.</p></li>
<li><p><a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> can now optionally use a monotonic clock if available
(see below for more details).</p></li>
</ul>
</div>
<div class="section" id="backwards-incompatible-changes">
<h3>Backwards-incompatible changes<a class="headerlink" href="#backwards-incompatible-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Python 2.5 is no longer supported.  Python 3 is now supported in a single
codebase instead of using <code class="docutils literal notranslate"><span class="pre">2to3</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">tornado.database</span></code> module has been removed.  It is now available
as a separate package, <a class="reference external" href="https://github.com/bdarnell/torndb">torndb</a></p></li>
<li><p>Functions that take an <code class="docutils literal notranslate"><span class="pre">io_loop</span></code> parameter now default to
<a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.current" title="tornado.ioloop.IOLoop.current"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.current()</span></code></a> instead of <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.instance" title="tornado.ioloop.IOLoop.instance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.instance()</span></code></a>.</p></li>
<li><p>Empty HTTP request arguments are no longer ignored.  This applies to
<code class="docutils literal notranslate"><span class="pre">HTTPRequest.arguments</span></code> and <code class="docutils literal notranslate"><span class="pre">RequestHandler.get_argument[s]</span></code>
in WSGI and non-WSGI modes.</p></li>
<li><p>On Python 3, <a class="reference internal" href="../escape.html#tornado.escape.json_encode" title="tornado.escape.json_encode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.escape.json_encode</span></code></a> no longer accepts byte strings.</p></li>
<li><p>On Python 3, the <code class="docutils literal notranslate"><span class="pre">get_authenticated_user</span></code> methods in <a class="reference internal" href="../auth.html#module-tornado.auth" title="tornado.auth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.auth</span></code></a>
now return character strings instead of byte strings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tornado.netutil.TCPServer</span></code> has moved to its own module,
<a class="reference internal" href="../tcpserver.html#module-tornado.tcpserver" title="tornado.tcpserver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.tcpserver</span></code></a>.</p></li>
<li><p>The Tornado test suite now requires <code class="docutils literal notranslate"><span class="pre">unittest2</span></code> when run on Python 2.6.</p></li>
<li><p><a class="reference internal" href="../options.html#tornado.options.options" title="tornado.options.options"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options.options</span></code></a> is no longer a subclass of <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#dict" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>; attribute-style
access is now required.</p></li>
</ul>
</div>
<div class="section" id="detailed-changes-by-module">
<h3>Detailed changes by module<a class="headerlink" href="#detailed-changes-by-module" title="Permalink to this headline">¶</a></h3>
<div class="section" id="multiple-modules">
<h4>Multiple modules<a class="headerlink" href="#multiple-modules" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Tornado no longer logs to the root logger.  Details on the new logging
scheme can be found under the <a class="reference internal" href="../log.html#module-tornado.log" title="tornado.log"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.log</span></code></a> module.  Note that in some
cases this will require that you add an explicit logging configuration
in order to see any output (perhaps just calling <code class="docutils literal notranslate"><span class="pre">logging.basicConfig()</span></code>),
although both <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.start" title="tornado.ioloop.IOLoop.start"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.start()</span></code></a> and <a class="reference internal" href="../options.html#tornado.options.parse_command_line" title="tornado.options.parse_command_line"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options.parse_command_line</span></code></a>
will do this for you.</p></li>
<li><p>On python 3.2+, methods that take an <code class="docutils literal notranslate"><span class="pre">ssl_options</span></code> argument (on
<a class="reference internal" href="../iostream.html#tornado.iostream.SSLIOStream" title="tornado.iostream.SSLIOStream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SSLIOStream</span></code></a>, <a class="reference internal" href="../tcpserver.html#tornado.tcpserver.TCPServer" title="tornado.tcpserver.TCPServer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TCPServer</span></code></a>, and <a class="reference internal" href="../httpserver.html#tornado.httpserver.HTTPServer" title="tornado.httpserver.HTTPServer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">HTTPServer</span></code></a>) now accept either a
dictionary of options or an <a class="reference external" href="https://docs.python.org/3.6/library/ssl.html#ssl.SSLContext" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code></a> object.</p></li>
<li><p>New optional dependency on <a class="reference external" href="https://docs.python.org/3.6/library/concurrent.futures.html#module-concurrent.futures" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">concurrent.futures</span></code></a> to provide better support
for working with threads.  <a class="reference external" href="https://docs.python.org/3.6/library/concurrent.futures.html#module-concurrent.futures" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">concurrent.futures</span></code></a> is in the standard library
for Python 3.2+, and can be installed on older versions with
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">futures</span></code>.</p></li>
</ul>
</div>
<div class="section" id="tornado-autoreload">
<h4><a class="reference internal" href="../autoreload.html#module-tornado.autoreload" title="tornado.autoreload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.autoreload</span></code></a><a class="headerlink" href="#tornado-autoreload" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../autoreload.html#module-tornado.autoreload" title="tornado.autoreload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.autoreload</span></code></a> is now more reliable when there are errors at import
time.</p></li>
<li><p>Calling <a class="reference internal" href="../autoreload.html#tornado.autoreload.start" title="tornado.autoreload.start"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.autoreload.start</span></code></a> (or creating an <a class="reference internal" href="../web.html#tornado.web.Application" title="tornado.web.Application"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Application</span></code></a> with
<code class="docutils literal notranslate"><span class="pre">debug=True</span></code>) twice on the same <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> now does nothing (instead of
creating multiple periodic callbacks).  Starting autoreload on
more than one <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> in the same process now logs a warning.</p></li>
<li><p>Scripts run by autoreload no longer inherit <code class="docutils literal notranslate"><span class="pre">__future__</span></code> imports
used by Tornado.</p></li>
</ul>
</div>
<div class="section" id="tornado-auth">
<h4><a class="reference internal" href="../auth.html#module-tornado.auth" title="tornado.auth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.auth</span></code></a><a class="headerlink" href="#tornado-auth" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>On Python 3, the <code class="docutils literal notranslate"><span class="pre">get_authenticated_user</span></code> method family now returns
character strings instead of byte strings.</p></li>
<li><p>Asynchronous methods defined in <a class="reference internal" href="../auth.html#module-tornado.auth" title="tornado.auth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.auth</span></code></a> now return a
<a class="reference internal" href="../concurrent.html#tornado.concurrent.Future" title="tornado.concurrent.Future"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Future</span></code></a>, and their <code class="docutils literal notranslate"><span class="pre">callback</span></code> argument is optional.  The
<code class="docutils literal notranslate"><span class="pre">Future</span></code> interface is preferred as it offers better error handling
(the previous interface just logged a warning and returned None).</p></li>
<li><p>The <a class="reference internal" href="../auth.html#module-tornado.auth" title="tornado.auth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.auth</span></code></a> mixin classes now define a method
<code class="docutils literal notranslate"><span class="pre">get_auth_http_client</span></code>, which can be overridden to use a non-default
<a class="reference internal" href="../httpclient.html#tornado.httpclient.AsyncHTTPClient" title="tornado.httpclient.AsyncHTTPClient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPClient</span></code></a> instance (e.g. to use a different <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a>)</p></li>
<li><p>Subclasses of <a class="reference internal" href="../auth.html#tornado.auth.OAuthMixin" title="tornado.auth.OAuthMixin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OAuthMixin</span></code></a> are encouraged to override
<a class="reference internal" href="../auth.html#tornado.auth.OAuthMixin._oauth_get_user_future" title="tornado.auth.OAuthMixin._oauth_get_user_future"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OAuthMixin._oauth_get_user_future</span></code></a> instead of <code class="docutils literal notranslate"><span class="pre">_oauth_get_user</span></code>,
although both methods are still supported.</p></li>
</ul>
</div>
<div class="section" id="tornado-concurrent">
<h4><a class="reference internal" href="../concurrent.html#module-tornado.concurrent" title="tornado.concurrent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.concurrent</span></code></a><a class="headerlink" href="#tornado-concurrent" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New module <a class="reference internal" href="../concurrent.html#module-tornado.concurrent" title="tornado.concurrent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.concurrent</span></code></a> contains code to support working with
<a class="reference external" href="https://docs.python.org/3.6/library/concurrent.futures.html#module-concurrent.futures" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">concurrent.futures</span></code></a>, or to emulate future-based interface when that module
is not available.</p></li>
</ul>
</div>
<div class="section" id="tornado-curl-httpclient">
<h4><code class="docutils literal notranslate"><span class="pre">tornado.curl_httpclient</span></code><a class="headerlink" href="#tornado-curl-httpclient" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Preliminary support for <code class="docutils literal notranslate"><span class="pre">tornado.curl_httpclient</span></code> on Python 3.  The latest
official release of pycurl only supports Python 2, but Ubuntu has a
port available in 12.10 (<code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">python3-pycurl</span></code>).  This port
currently has bugs that prevent it from handling arbitrary binary data
but it should work for textual (utf8) resources.</p></li>
<li><p>Fix a crash with libcurl 7.29.0 if a curl object is created and closed
without being used.</p></li>
</ul>
</div>
<div class="section" id="tornado-escape">
<h4><a class="reference internal" href="../escape.html#module-tornado.escape" title="tornado.escape"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.escape</span></code></a><a class="headerlink" href="#tornado-escape" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>On Python 3, <a class="reference internal" href="../escape.html#tornado.escape.json_encode" title="tornado.escape.json_encode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">json_encode</span></code></a> no longer accepts byte strings.
This mirrors the behavior of the underlying json module.  Python 2 behavior
is unchanged but should be faster.</p></li>
</ul>
</div>
<div class="section" id="tornado-gen">
<h4><a class="reference internal" href="../gen.html#module-tornado.gen" title="tornado.gen"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.gen</span></code></a><a class="headerlink" href="#tornado-gen" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New decorator <code class="docutils literal notranslate"><span class="pre">&#64;gen.coroutine</span></code> is available as an alternative to
<code class="docutils literal notranslate"><span class="pre">&#64;gen.engine</span></code>.  It automatically returns a
<a class="reference internal" href="../concurrent.html#tornado.concurrent.Future" title="tornado.concurrent.Future"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Future</span></code></a>, and within the function instead of
calling a callback you return a value with <code class="docutils literal notranslate"><span class="pre">raise</span>
<span class="pre">gen.Return(value)</span></code> (or simply <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">value</span></code> in Python 3.3).</p></li>
<li><p>Generators may now yield <a class="reference internal" href="../concurrent.html#tornado.concurrent.Future" title="tornado.concurrent.Future"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Future</span></code></a> objects.</p></li>
<li><p>Callbacks produced by <code class="docutils literal notranslate"><span class="pre">gen.Callback</span></code> and <code class="docutils literal notranslate"><span class="pre">gen.Task</span></code> are now automatically
stack-context-wrapped, to minimize the risk of context leaks when used
with asynchronous functions that don’t do their own wrapping.</p></li>
<li><p>Fixed a memory leak involving generators, <a class="reference internal" href="../web.html#tornado.web.RequestHandler.flush" title="tornado.web.RequestHandler.flush"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RequestHandler.flush</span></code></a>,
and clients closing connections while output is being written.</p></li>
<li><p>Yielding a large list no longer has quadratic performance.</p></li>
</ul>
</div>
<div class="section" id="tornado-httpclient">
<h4><a class="reference internal" href="../httpclient.html#module-tornado.httpclient" title="tornado.httpclient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.httpclient</span></code></a><a class="headerlink" href="#tornado-httpclient" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../httpclient.html#tornado.httpclient.AsyncHTTPClient.fetch" title="tornado.httpclient.AsyncHTTPClient.fetch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPClient.fetch</span></code></a> now returns a <a class="reference internal" href="../concurrent.html#tornado.concurrent.Future" title="tornado.concurrent.Future"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Future</span></code></a> and its callback argument
is optional.  When the future interface is used, any error will be raised
automatically, as if <a class="reference internal" href="../httpclient.html#tornado.httpclient.HTTPResponse.rethrow" title="tornado.httpclient.HTTPResponse.rethrow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">HTTPResponse.rethrow</span></code></a> was called.</p></li>
<li><p><a class="reference internal" href="../httpclient.html#tornado.httpclient.AsyncHTTPClient.configure" title="tornado.httpclient.AsyncHTTPClient.configure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPClient.configure</span></code></a> and all <a class="reference internal" href="../httpclient.html#tornado.httpclient.AsyncHTTPClient" title="tornado.httpclient.AsyncHTTPClient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPClient</span></code></a> constructors
now take a <code class="docutils literal notranslate"><span class="pre">defaults</span></code> keyword argument.  This argument should be a
dictionary, and its values will be used in place of corresponding
attributes of <a class="reference internal" href="../httpclient.html#tornado.httpclient.HTTPRequest" title="tornado.httpclient.HTTPRequest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">HTTPRequest</span></code></a> that are not set.</p></li>
<li><p>All unset attributes of <a class="reference internal" href="../httpclient.html#tornado.httpclient.HTTPRequest" title="tornado.httpclient.HTTPRequest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.httpclient.HTTPRequest</span></code></a> are now
<code class="docutils literal notranslate"><span class="pre">None</span></code>.  The default values of some attributes
(<code class="docutils literal notranslate"><span class="pre">connect_timeout</span></code>, <code class="docutils literal notranslate"><span class="pre">request_timeout</span></code>, <code class="docutils literal notranslate"><span class="pre">follow_redirects</span></code>,
<code class="docutils literal notranslate"><span class="pre">max_redirects</span></code>, <code class="docutils literal notranslate"><span class="pre">use_gzip</span></code>, <code class="docutils literal notranslate"><span class="pre">proxy_password</span></code>,
<code class="docutils literal notranslate"><span class="pre">allow_nonstandard_methods</span></code>, and <code class="docutils literal notranslate"><span class="pre">validate_cert</span></code> have been moved
from <a class="reference internal" href="../httpclient.html#tornado.httpclient.HTTPRequest" title="tornado.httpclient.HTTPRequest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">HTTPRequest</span></code></a> to the client
implementations.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">max_clients</span></code> argument to <a class="reference internal" href="../httpclient.html#tornado.httpclient.AsyncHTTPClient" title="tornado.httpclient.AsyncHTTPClient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPClient</span></code></a> is now a keyword-only
argument.</p></li>
<li><p>Keyword arguments to <a class="reference internal" href="../httpclient.html#tornado.httpclient.AsyncHTTPClient.configure" title="tornado.httpclient.AsyncHTTPClient.configure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPClient.configure</span></code></a> are no longer used
when instantiating an implementation subclass directly.</p></li>
<li><p>Secondary <a class="reference internal" href="../httpclient.html#tornado.httpclient.AsyncHTTPClient" title="tornado.httpclient.AsyncHTTPClient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPClient</span></code></a> callbacks (<code class="docutils literal notranslate"><span class="pre">streaming_callback</span></code>,
<code class="docutils literal notranslate"><span class="pre">header_callback</span></code>, and <code class="docutils literal notranslate"><span class="pre">prepare_curl_callback</span></code>) now respect
<code class="docutils literal notranslate"><span class="pre">StackContext</span></code>.</p></li>
</ul>
</div>
<div class="section" id="tornado-httpserver">
<h4><a class="reference internal" href="../httpserver.html#module-tornado.httpserver" title="tornado.httpserver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.httpserver</span></code></a><a class="headerlink" href="#tornado-httpserver" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../httpserver.html#tornado.httpserver.HTTPServer" title="tornado.httpserver.HTTPServer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">HTTPServer</span></code></a> no longer logs an error when it is unable to read a second
request from an HTTP 1.1 keep-alive connection.</p></li>
<li><p><a class="reference internal" href="../httpserver.html#tornado.httpserver.HTTPServer" title="tornado.httpserver.HTTPServer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">HTTPServer</span></code></a> now takes a <code class="docutils literal notranslate"><span class="pre">protocol</span></code> keyword argument which can be set
to <code class="docutils literal notranslate"><span class="pre">https</span></code> if the server is behind an SSL-decoding proxy that does not
set any supported X-headers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tornado.httpserver.HTTPConnection</span></code> now has a <code class="docutils literal notranslate"><span class="pre">set_close_callback</span></code>
method that should be used instead of reaching into its <code class="docutils literal notranslate"><span class="pre">stream</span></code>
attribute.</p></li>
<li><p>Empty HTTP request arguments are no longer ignored.  This applies to
<code class="docutils literal notranslate"><span class="pre">HTTPRequest.arguments</span></code> and <code class="docutils literal notranslate"><span class="pre">RequestHandler.get_argument[s]</span></code>
in WSGI and non-WSGI modes.</p></li>
</ul>
</div>
<div class="section" id="tornado-ioloop">
<h4><a class="reference internal" href="../ioloop.html#module-tornado.ioloop" title="tornado.ioloop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.ioloop</span></code></a><a class="headerlink" href="#tornado-ioloop" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New function <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.current" title="tornado.ioloop.IOLoop.current"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.current</span></code></a> returns the <code class="docutils literal notranslate"><span class="pre">IOLoop</span></code> that is running
on the current thread (as opposed to <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.instance" title="tornado.ioloop.IOLoop.instance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.instance</span></code></a>, which returns a
specific thread’s (usually the main thread’s) IOLoop).</p></li>
<li><p>New method <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.add_future" title="tornado.ioloop.IOLoop.add_future"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.add_future</span></code></a> to run a callback on the IOLoop when
an asynchronous <a class="reference internal" href="../concurrent.html#tornado.concurrent.Future" title="tornado.concurrent.Future"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Future</span></code></a> finishes.</p></li>
<li><p><a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> now has a static <a class="reference internal" href="../util.html#tornado.util.Configurable.configure" title="tornado.util.Configurable.configure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure</span></code></a>
method like the one on <a class="reference internal" href="../httpclient.html#tornado.httpclient.AsyncHTTPClient" title="tornado.httpclient.AsyncHTTPClient"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPClient</span></code></a>, which can be used to
select an <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> implementation other than the default.</p></li>
<li><p>The <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> poller implementations (<code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">epoll</span></code>, <code class="docutils literal notranslate"><span class="pre">kqueue</span></code>)
are now available as distinct subclasses of <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a>.  Instantiating
<a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> will continue to automatically choose the best available
implementation.</p></li>
<li><p>The <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> constructor has a new keyword argument <code class="docutils literal notranslate"><span class="pre">time_func</span></code>,
which can be used to set the time function used when scheduling callbacks.
This is most useful with the <a class="reference external" href="https://docs.python.org/3.6/library/time.html#time.monotonic" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time.monotonic</span></code></a> function, introduced
in Python 3.3 and backported to older versions via the <code class="docutils literal notranslate"><span class="pre">monotime</span></code>
module.  Using a monotonic clock here avoids problems when the system
clock is changed.</p></li>
<li><p>New function <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.time" title="tornado.ioloop.IOLoop.time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.time</span></code></a> returns the current time according to the
IOLoop.  To use the new monotonic clock functionality, all calls to
<a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.add_timeout" title="tornado.ioloop.IOLoop.add_timeout"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.add_timeout</span></code></a> must be either pass a <a class="reference external" href="https://docs.python.org/3.6/library/datetime.html#datetime.timedelta" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a> or
a time relative to <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.time" title="tornado.ioloop.IOLoop.time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.time</span></code></a>, not <a class="reference external" href="https://docs.python.org/3.6/library/time.html#time.time" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time.time</span></code></a>.  (<a class="reference external" href="https://docs.python.org/3.6/library/time.html#time.time" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time.time</span></code></a> will
continue to work only as long as the IOLoop’s <code class="docutils literal notranslate"><span class="pre">time_func</span></code> argument
is not used).</p></li>
<li><p>New convenience method <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.run_sync" title="tornado.ioloop.IOLoop.run_sync"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.run_sync</span></code></a> can be used to start an IOLoop
just long enough to run a single coroutine.</p></li>
<li><p>New method <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.add_callback_from_signal" title="tornado.ioloop.IOLoop.add_callback_from_signal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.add_callback_from_signal</span></code></a> is safe to use in a signal
handler (the regular <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.add_callback" title="tornado.ioloop.IOLoop.add_callback"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_callback</span></code></a> method may deadlock).</p></li>
<li><p><a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> now uses <a class="reference external" href="https://docs.python.org/3.6/library/signal.html#signal.set_wakeup_fd" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">signal.set_wakeup_fd</span></code></a> where available (Python 2.6+
on Unix) to avoid a race condition that could result in Python signal
handlers being delayed.</p></li>
<li><p>Method <code class="docutils literal notranslate"><span class="pre">IOLoop.running()</span></code> has been removed.</p></li>
<li><p><a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop" title="tornado.ioloop.IOLoop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop</span></code></a> has been refactored to better support subclassing.</p></li>
<li><p><a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.add_callback" title="tornado.ioloop.IOLoop.add_callback"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.add_callback</span></code></a> and <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.add_callback_from_signal" title="tornado.ioloop.IOLoop.add_callback_from_signal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_callback_from_signal</span></code></a> now take
<code class="docutils literal notranslate"><span class="pre">*args,</span> <span class="pre">**kwargs</span></code> to pass along to the callback.</p></li>
</ul>
</div>
<div class="section" id="tornado-iostream">
<h4><a class="reference internal" href="../iostream.html#module-tornado.iostream" title="tornado.iostream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.iostream</span></code></a><a class="headerlink" href="#tornado-iostream" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../iostream.html#tornado.iostream.IOStream.connect" title="tornado.iostream.IOStream.connect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOStream.connect</span></code></a> now has an optional <code class="docutils literal notranslate"><span class="pre">server_hostname</span></code> argument
which will be used for SSL certificate validation when applicable.
Additionally, when supported (on Python 3.2+), this hostname
will be sent via SNI (and this is supported by <code class="docutils literal notranslate"><span class="pre">tornado.simple_httpclient</span></code>)</p></li>
<li><p>Much of <a class="reference internal" href="../iostream.html#tornado.iostream.IOStream" title="tornado.iostream.IOStream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOStream</span></code></a> has been refactored into a separate class
<a class="reference internal" href="../iostream.html#tornado.iostream.BaseIOStream" title="tornado.iostream.BaseIOStream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseIOStream</span></code></a>.</p></li>
<li><p>New class <a class="reference internal" href="../iostream.html#tornado.iostream.PipeIOStream" title="tornado.iostream.PipeIOStream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.iostream.PipeIOStream</span></code></a> provides the IOStream
interface on pipe file descriptors.</p></li>
<li><p><a class="reference internal" href="../iostream.html#tornado.iostream.IOStream" title="tornado.iostream.IOStream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOStream</span></code></a> now raises a new exception
<code class="docutils literal notranslate"><span class="pre">tornado.iostream.StreamClosedError</span></code> when you attempt to read or
write after the stream has been closed (by either side).</p></li>
<li><p><a class="reference internal" href="../iostream.html#tornado.iostream.IOStream" title="tornado.iostream.IOStream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOStream</span></code></a> now simply closes the connection when it gets an
<code class="docutils literal notranslate"><span class="pre">ECONNRESET</span></code> error, rather than logging it as an error.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IOStream.error</span></code> no longer picks up unrelated exceptions.</p></li>
<li><p><a class="reference internal" href="../iostream.html#tornado.iostream.BaseIOStream.close" title="tornado.iostream.BaseIOStream.close"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseIOStream.close</span></code></a> now has an <code class="docutils literal notranslate"><span class="pre">exc_info</span></code> argument (similar to the
one used in the <a class="reference external" href="https://docs.python.org/3.6/library/logging.html#module-logging" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logging</span></code></a> module) that can be used to set the stream’s
<code class="docutils literal notranslate"><span class="pre">error</span></code> attribute when closing it.</p></li>
<li><p><a class="reference internal" href="../iostream.html#tornado.iostream.BaseIOStream.read_until_close" title="tornado.iostream.BaseIOStream.read_until_close"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseIOStream.read_until_close</span></code></a> now works correctly when it is called
while there is buffered data.</p></li>
<li><p>Fixed a major performance regression when run on PyPy (introduced in
Tornado 2.3).</p></li>
</ul>
</div>
<div class="section" id="tornado-log">
<h4><a class="reference internal" href="../log.html#module-tornado.log" title="tornado.log"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.log</span></code></a><a class="headerlink" href="#tornado-log" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New module containing <a class="reference internal" href="../log.html#tornado.log.enable_pretty_logging" title="tornado.log.enable_pretty_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">enable_pretty_logging</span></code></a> and <a class="reference internal" href="../log.html#tornado.log.LogFormatter" title="tornado.log.LogFormatter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LogFormatter</span></code></a>,
moved from the options module.</p></li>
<li><p><a class="reference internal" href="../log.html#tornado.log.LogFormatter" title="tornado.log.LogFormatter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LogFormatter</span></code></a> now handles non-ascii data in messages and tracebacks better.</p></li>
</ul>
</div>
<div class="section" id="tornado-netutil">
<h4><a class="reference internal" href="../netutil.html#module-tornado.netutil" title="tornado.netutil"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.netutil</span></code></a><a class="headerlink" href="#tornado-netutil" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New class <a class="reference internal" href="../netutil.html#tornado.netutil.Resolver" title="tornado.netutil.Resolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.netutil.Resolver</span></code></a> provides an asynchronous
interface to DNS resolution.  The default implementation is still
blocking, but non-blocking implementations are available using one
of three optional dependencies: <a class="reference internal" href="../netutil.html#tornado.netutil.ThreadedResolver" title="tornado.netutil.ThreadedResolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ThreadedResolver</span></code></a>
using the <a class="reference external" href="https://docs.python.org/3.6/library/concurrent.futures.html#module-concurrent.futures" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">concurrent.futures</span></code></a> thread pool,
<a class="reference internal" href="../caresresolver.html#tornado.platform.caresresolver.CaresResolver" title="tornado.platform.caresresolver.CaresResolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.platform.caresresolver.CaresResolver</span></code></a> using the <code class="docutils literal notranslate"><span class="pre">pycares</span></code>
library, or <a class="reference internal" href="../twisted.html#tornado.platform.twisted.TwistedResolver" title="tornado.platform.twisted.TwistedResolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.platform.twisted.TwistedResolver</span></code></a> using <code class="docutils literal notranslate"><span class="pre">twisted</span></code></p></li>
<li><p>New function <a class="reference internal" href="../netutil.html#tornado.netutil.is_valid_ip" title="tornado.netutil.is_valid_ip"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.netutil.is_valid_ip</span></code></a> returns true if a given string
is a valid IP (v4 or v6) address.</p></li>
<li><p><a class="reference internal" href="../netutil.html#tornado.netutil.bind_sockets" title="tornado.netutil.bind_sockets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.netutil.bind_sockets</span></code></a> has a new <code class="docutils literal notranslate"><span class="pre">flags</span></code> argument that can
be used to pass additional flags to <code class="docutils literal notranslate"><span class="pre">getaddrinfo</span></code>.</p></li>
<li><p><a class="reference internal" href="../netutil.html#tornado.netutil.bind_sockets" title="tornado.netutil.bind_sockets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.netutil.bind_sockets</span></code></a> no longer sets <code class="docutils literal notranslate"><span class="pre">AI_ADDRCONFIG</span></code>; this will
cause it to bind to both ipv4 and ipv6 more often than before.</p></li>
<li><p><a class="reference internal" href="../netutil.html#tornado.netutil.bind_sockets" title="tornado.netutil.bind_sockets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.netutil.bind_sockets</span></code></a> now works when Python was compiled
with <code class="docutils literal notranslate"><span class="pre">--disable-ipv6</span></code> but IPv6 DNS resolution is available on the
system.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tornado.netutil.TCPServer</span></code> has moved to its own module, <a class="reference internal" href="../tcpserver.html#module-tornado.tcpserver" title="tornado.tcpserver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.tcpserver</span></code></a>.</p></li>
</ul>
</div>
<div class="section" id="tornado-options">
<h4><a class="reference internal" href="../options.html#module-tornado.options" title="tornado.options"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options</span></code></a><a class="headerlink" href="#tornado-options" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>The class underlying the functions in <a class="reference internal" href="../options.html#module-tornado.options" title="tornado.options"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options</span></code></a> is now public
(<a class="reference internal" href="../options.html#tornado.options.OptionParser" title="tornado.options.OptionParser"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options.OptionParser</span></code></a>).  This can be used to create multiple
independent option sets, such as for subcommands.</p></li>
<li><p><a class="reference internal" href="../options.html#tornado.options.parse_config_file" title="tornado.options.parse_config_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options.parse_config_file</span></code></a> now configures logging automatically
by default, in the same way that <a class="reference internal" href="../options.html#tornado.options.parse_command_line" title="tornado.options.parse_command_line"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_command_line</span></code></a> does.</p></li>
<li><p>New function <a class="reference internal" href="../options.html#tornado.options.add_parse_callback" title="tornado.options.add_parse_callback"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options.add_parse_callback</span></code></a> schedules a callback
to be run after the command line or config file has been parsed.  The
keyword argument <code class="docutils literal notranslate"><span class="pre">final=False</span></code> can be used on either parsing function
to suppress these callbacks.</p></li>
<li><p><a class="reference internal" href="../options.html#tornado.options.define" title="tornado.options.define"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options.define</span></code></a> now takes a <code class="docutils literal notranslate"><span class="pre">callback</span></code> argument.  This callback
will be run with the new value whenever the option is changed.  This is
especially useful for options that set other options, such as by reading
from a config file.</p></li>
<li><p><a class="reference internal" href="../options.html#tornado.options.parse_command_line" title="tornado.options.parse_command_line"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options.parse_command_line</span></code></a> <code class="docutils literal notranslate"><span class="pre">--help</span></code> output now goes to <code class="docutils literal notranslate"><span class="pre">stderr</span></code>
rather than <code class="docutils literal notranslate"><span class="pre">stdout</span></code>.</p></li>
<li><p><a class="reference internal" href="../options.html#tornado.options.options" title="tornado.options.options"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options.options</span></code></a> is no longer a subclass of <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#dict" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>; attribute-style
access is now required.</p></li>
<li><p><a class="reference internal" href="../options.html#tornado.options.options" title="tornado.options.options"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options.options</span></code></a> (and <a class="reference internal" href="../options.html#tornado.options.OptionParser" title="tornado.options.OptionParser"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OptionParser</span></code></a> instances generally) now
have a <a class="reference internal" href="../options.html#tornado.options.OptionParser.mockable" title="tornado.options.OptionParser.mockable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mockable()</span></code></a> method that returns a wrapper object compatible with
<a class="reference external" href="https://docs.python.org/3.6/library/unittest.mock.html#unittest.mock.patch" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mock.patch</span></code></a>.</p></li>
<li><p>Function <code class="docutils literal notranslate"><span class="pre">tornado.options.enable_pretty_logging</span></code> has been moved to the
<a class="reference internal" href="../log.html#module-tornado.log" title="tornado.log"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.log</span></code></a> module.</p></li>
</ul>
</div>
<div class="section" id="tornado-platform-caresresolver">
<h4><a class="reference internal" href="../caresresolver.html#module-tornado.platform.caresresolver" title="tornado.platform.caresresolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.platform.caresresolver</span></code></a><a class="headerlink" href="#tornado-platform-caresresolver" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New module containing an asynchronous implementation of the <a class="reference internal" href="../netutil.html#tornado.netutil.Resolver" title="tornado.netutil.Resolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Resolver</span></code></a>
interface, using the <code class="docutils literal notranslate"><span class="pre">pycares</span></code> library.</p></li>
</ul>
</div>
<div class="section" id="tornado-platform-twisted">
<h4><a class="reference internal" href="../twisted.html#module-tornado.platform.twisted" title="tornado.platform.twisted"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.platform.twisted</span></code></a><a class="headerlink" href="#tornado-platform-twisted" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New class <code class="docutils literal notranslate"><span class="pre">tornado.platform.twisted.TwistedIOLoop</span></code> allows Tornado
code to be run on the Twisted reactor (as opposed to the existing
<code class="docutils literal notranslate"><span class="pre">TornadoReactor</span></code>, which bridges the gap in the other direction).</p></li>
<li><p>New class <a class="reference internal" href="../twisted.html#tornado.platform.twisted.TwistedResolver" title="tornado.platform.twisted.TwistedResolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.platform.twisted.TwistedResolver</span></code></a> is an asynchronous
implementation of the <a class="reference internal" href="../netutil.html#tornado.netutil.Resolver" title="tornado.netutil.Resolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Resolver</span></code></a> interface.</p></li>
</ul>
</div>
<div class="section" id="tornado-process">
<h4><a class="reference internal" href="../process.html#module-tornado.process" title="tornado.process"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.process</span></code></a><a class="headerlink" href="#tornado-process" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New class <a class="reference internal" href="../process.html#tornado.process.Subprocess" title="tornado.process.Subprocess"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.process.Subprocess</span></code></a> wraps <a class="reference external" href="https://docs.python.org/3.6/library/subprocess.html#subprocess.Popen" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> with
<a class="reference internal" href="../iostream.html#tornado.iostream.PipeIOStream" title="tornado.iostream.PipeIOStream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PipeIOStream</span></code></a> access to the child’s file descriptors.</p></li>
</ul>
</div>
<div class="section" id="tornado-simple-httpclient">
<h4><code class="docutils literal notranslate"><span class="pre">tornado.simple_httpclient</span></code><a class="headerlink" href="#tornado-simple-httpclient" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SimpleAsyncHTTPClient</span></code> now takes a <code class="docutils literal notranslate"><span class="pre">resolver</span></code> keyword argument
(which may be passed to either the constructor or <a class="reference internal" href="../util.html#tornado.util.Configurable.configure" title="tornado.util.Configurable.configure"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure</span></code></a>), to allow it to use the new non-blocking
<a class="reference internal" href="../netutil.html#tornado.netutil.Resolver" title="tornado.netutil.Resolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.netutil.Resolver</span></code></a>.</p></li>
<li><p>When following redirects, <code class="docutils literal notranslate"><span class="pre">SimpleAsyncHTTPClient</span></code> now treats a 302
response code the same as a 303.  This is contrary to the HTTP spec
but consistent with all browsers and other major HTTP clients
(including <code class="docutils literal notranslate"><span class="pre">CurlAsyncHTTPClient</span></code>).</p></li>
<li><p>The behavior of <code class="docutils literal notranslate"><span class="pre">header_callback</span></code> with <code class="docutils literal notranslate"><span class="pre">SimpleAsyncHTTPClient</span></code> has
changed and is now the same as that of <code class="docutils literal notranslate"><span class="pre">CurlAsyncHTTPClient</span></code>.  The
header callback now receives the first line of the response (e.g.
<code class="docutils literal notranslate"><span class="pre">HTTP/1.0</span> <span class="pre">200</span> <span class="pre">OK</span></code>) and the final empty line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tornado.simple_httpclient</span></code> now accepts responses with a 304
status code that include a <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code> header.</p></li>
<li><p>Fixed a bug in which <code class="docutils literal notranslate"><span class="pre">SimpleAsyncHTTPClient</span></code> callbacks were being run in the
client’s <code class="docutils literal notranslate"><span class="pre">stack_context</span></code>.</p></li>
</ul>
</div>
<div class="section" id="tornado-stack-context">
<h4><code class="docutils literal notranslate"><span class="pre">tornado.stack_context</span></code><a class="headerlink" href="#tornado-stack-context" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stack_context.wrap</span></code> now runs the wrapped callback in a more consistent
environment by recreating contexts even if they already exist on the
stack.</p></li>
<li><p>Fixed a bug in which stack contexts could leak from one callback
chain to another.</p></li>
<li><p>Yield statements inside a <code class="docutils literal notranslate"><span class="pre">with</span></code> statement can cause stack
contexts to become inconsistent; an exception will now be raised
when this case is detected.</p></li>
</ul>
</div>
<div class="section" id="tornado-template">
<h4><a class="reference internal" href="../template.html#module-tornado.template" title="tornado.template"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.template</span></code></a><a class="headerlink" href="#tornado-template" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Errors while rendering templates no longer log the generated code,
since the enhanced stack traces (from version 2.1) should make this
unnecessary.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">apply</span> <span class="pre">%}</span></code> directive now works properly with functions that return
both unicode strings and byte strings (previously only byte strings were
supported).</p></li>
<li><p>Code in templates is no longer affected by Tornado’s <code class="docutils literal notranslate"><span class="pre">__future__</span></code> imports
(which previously included <code class="docutils literal notranslate"><span class="pre">absolute_import</span></code> and <code class="docutils literal notranslate"><span class="pre">division</span></code>).</p></li>
</ul>
</div>
<div class="section" id="tornado-testing">
<h4><a class="reference internal" href="../testing.html#module-tornado.testing" title="tornado.testing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.testing</span></code></a><a class="headerlink" href="#tornado-testing" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New function <a class="reference internal" href="../testing.html#tornado.testing.bind_unused_port" title="tornado.testing.bind_unused_port"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.testing.bind_unused_port</span></code></a> both chooses a port
and binds a socket to it, so there is no risk of another process
using the same port.  <code class="docutils literal notranslate"><span class="pre">get_unused_port</span></code> is now deprecated.</p></li>
<li><p>New decorator <a class="reference internal" href="../testing.html#tornado.testing.gen_test" title="tornado.testing.gen_test"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.testing.gen_test</span></code></a> can be used to allow for
yielding <a class="reference internal" href="../gen.html#module-tornado.gen" title="tornado.gen"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.gen</span></code></a> objects in tests, as an alternative to the
<code class="docutils literal notranslate"><span class="pre">stop</span></code> and <code class="docutils literal notranslate"><span class="pre">wait</span></code> methods of <a class="reference internal" href="../testing.html#tornado.testing.AsyncTestCase" title="tornado.testing.AsyncTestCase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncTestCase</span></code></a>.</p></li>
<li><p><a class="reference internal" href="../testing.html#tornado.testing.AsyncTestCase" title="tornado.testing.AsyncTestCase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.testing.AsyncTestCase</span></code></a> and friends now extend <code class="docutils literal notranslate"><span class="pre">unittest2.TestCase</span></code>
when it is available (and continue to use the standard <code class="docutils literal notranslate"><span class="pre">unittest</span></code> module
when <code class="docutils literal notranslate"><span class="pre">unittest2</span></code> is not available)</p></li>
<li><p><a class="reference internal" href="../testing.html#tornado.testing.ExpectLog" title="tornado.testing.ExpectLog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.testing.ExpectLog</span></code></a> can be used as a finer-grained alternative
to <code class="docutils literal notranslate"><span class="pre">tornado.testing.LogTrapTestCase</span></code></p></li>
<li><p>The command-line interface to <a class="reference internal" href="../testing.html#tornado.testing.main" title="tornado.testing.main"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.testing.main</span></code></a> now supports
additional arguments from the underlying <a class="reference external" href="https://docs.python.org/3.6/library/unittest.html#module-unittest" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unittest</span></code></a> module:
<code class="docutils literal notranslate"><span class="pre">verbose</span></code>, <code class="docutils literal notranslate"><span class="pre">quiet</span></code>, <code class="docutils literal notranslate"><span class="pre">failfast</span></code>, <code class="docutils literal notranslate"><span class="pre">catch</span></code>, <code class="docutils literal notranslate"><span class="pre">buffer</span></code>.</p></li>
<li><p>The deprecated <code class="docutils literal notranslate"><span class="pre">--autoreload</span></code> option of <a class="reference internal" href="../testing.html#tornado.testing.main" title="tornado.testing.main"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.testing.main</span></code></a> has
been removed.  Use <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">tornado.autoreload</span></code> as a prefix command
instead.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--httpclient</span></code> option of <a class="reference internal" href="../testing.html#tornado.testing.main" title="tornado.testing.main"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.testing.main</span></code></a> has been moved
to <code class="docutils literal notranslate"><span class="pre">tornado.test.runtests</span></code> so as not to pollute the application
option namespace.  The <a class="reference internal" href="../options.html#module-tornado.options" title="tornado.options"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.options</span></code></a> module’s new callback
support now makes it easy to add options from a wrapper script
instead of putting all possible options in <a class="reference internal" href="../testing.html#tornado.testing.main" title="tornado.testing.main"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.testing.main</span></code></a>.</p></li>
<li><p><a class="reference internal" href="../testing.html#tornado.testing.AsyncHTTPTestCase" title="tornado.testing.AsyncHTTPTestCase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPTestCase</span></code></a> no longer calls <a class="reference internal" href="../httpclient.html#tornado.httpclient.AsyncHTTPClient.close" title="tornado.httpclient.AsyncHTTPClient.close"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncHTTPClient.close</span></code></a> for tests
that use the singleton <a class="reference internal" href="../ioloop.html#tornado.ioloop.IOLoop.instance" title="tornado.ioloop.IOLoop.instance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IOLoop.instance</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LogTrapTestCase</span></code> no longer fails when run in unknown logging
configurations.  This allows tests to be run under nose, which does its
own log buffering (<code class="docutils literal notranslate"><span class="pre">LogTrapTestCase</span></code> doesn’t do anything useful in this
case, but at least it doesn’t break things any more).</p></li>
</ul>
</div>
<div class="section" id="tornado-util">
<h4><code class="docutils literal notranslate"><span class="pre">tornado.util</span></code><a class="headerlink" href="#tornado-util" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tornado.util.b</span></code> (which was only intended for internal use) is gone.</p></li>
</ul>
</div>
<div class="section" id="tornado-web">
<h4><a class="reference internal" href="../web.html#module-tornado.web" title="tornado.web"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.web</span></code></a><a class="headerlink" href="#tornado-web" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../web.html#tornado.web.RequestHandler.set_header" title="tornado.web.RequestHandler.set_header"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RequestHandler.set_header</span></code></a> now overwrites previous header values
case-insensitively.</p></li>
<li><p><a class="reference internal" href="../web.html#tornado.web.RequestHandler" title="tornado.web.RequestHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.web.RequestHandler</span></code></a> has new attributes <code class="docutils literal notranslate"><span class="pre">path_args</span></code> and
<code class="docutils literal notranslate"><span class="pre">path_kwargs</span></code>, which contain the positional and keyword arguments
that are passed to the <code class="docutils literal notranslate"><span class="pre">get</span></code>/<code class="docutils literal notranslate"><span class="pre">post</span></code>/etc method.  These attributes
are set before those methods are called, so they are available during
<code class="docutils literal notranslate"><span class="pre">prepare()</span></code></p></li>
<li><p><a class="reference internal" href="../web.html#tornado.web.ErrorHandler" title="tornado.web.ErrorHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.web.ErrorHandler</span></code></a> no longer requires XSRF tokens on <code class="docutils literal notranslate"><span class="pre">POST</span></code>
requests, so posts to an unknown url will always return 404 instead of
complaining about XSRF tokens.</p></li>
<li><p>Several methods related to HTTP status codes now take a <code class="docutils literal notranslate"><span class="pre">reason</span></code> keyword
argument to specify an alternate “reason” string (i.e. the “Not Found” in
“HTTP/1.1 404 Not Found”).  It is now possible to set status codes other
than those defined in the spec, as long as a reason string is given.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Date</span></code> HTTP header is now set by default on all responses.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Etag</span></code>/<code class="docutils literal notranslate"><span class="pre">If-None-Match</span></code> requests now work with <a class="reference internal" href="../web.html#tornado.web.StaticFileHandler" title="tornado.web.StaticFileHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StaticFileHandler</span></code></a>.</p></li>
<li><p><a class="reference internal" href="../web.html#tornado.web.StaticFileHandler" title="tornado.web.StaticFileHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StaticFileHandler</span></code></a> no longer sets <code class="docutils literal notranslate"><span class="pre">Cache-Control:</span> <span class="pre">public</span></code> unnecessarily.</p></li>
<li><p>When gzip is enabled in a <a class="reference internal" href="../web.html#tornado.web.Application" title="tornado.web.Application"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.web.Application</span></code></a>, appropriate
<code class="docutils literal notranslate"><span class="pre">Vary:</span> <span class="pre">Accept-Encoding</span></code> headers are now sent.</p></li>
<li><p>It is no longer necessary to pass all handlers for a host in a single
<a class="reference internal" href="../web.html#tornado.web.Application.add_handlers" title="tornado.web.Application.add_handlers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Application.add_handlers</span></code></a> call.  Now the request will be matched
against the handlers for any <code class="docutils literal notranslate"><span class="pre">host_pattern</span></code> that includes the request’s
<code class="docutils literal notranslate"><span class="pre">Host</span></code> header.</p></li>
</ul>
</div>
<div class="section" id="tornado-websocket">
<h4><a class="reference internal" href="../websocket.html#module-tornado.websocket" title="tornado.websocket"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.websocket</span></code></a><a class="headerlink" href="#tornado-websocket" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Client-side WebSocket support is now available:
<a class="reference internal" href="../websocket.html#tornado.websocket.websocket_connect" title="tornado.websocket.websocket_connect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tornado.websocket.websocket_connect</span></code></a></p></li>
<li><p><a class="reference internal" href="../websocket.html#tornado.websocket.WebSocketHandler" title="tornado.websocket.WebSocketHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">WebSocketHandler</span></code></a> has new methods <a class="reference internal" href="../websocket.html#tornado.websocket.WebSocketHandler.ping" title="tornado.websocket.WebSocketHandler.ping"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ping</span></code></a> and
<a class="reference internal" href="../websocket.html#tornado.websocket.WebSocketHandler.on_pong" title="tornado.websocket.WebSocketHandler.on_pong"><code class="xref py py-obj docutils literal notranslate"><span class="pre">on_pong</span></code></a> to send pings to the browser (not
supported on the <code class="docutils literal notranslate"><span class="pre">draft76</span></code> protocol)</p></li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="v2.4.1.html" class="btn btn-neutral float-right" title="What’s new in Tornado 2.4.1" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="v3.0.1.html" class="btn btn-neutral float-left" title="What’s new in Tornado 3.0.1" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The Tornado Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>